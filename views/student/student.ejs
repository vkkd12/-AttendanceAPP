<%layout("layouts/boilerplate.ejs");%>
<body>
  <div
    class="student_info container p-4 pb-0 border border-black border-2 shadow-lg"
  >
    <h1 style="cursor: pointer" class="text-start"><%= student.name %></h1>
    <hr />
    <ol>
      <% for( let subject of student.subject) { %>
      <li>
        <div
          style="cursor: pointer"
          class="mb-1 drop_down_head text-decoration-underline fst-italic text-primary-emphasis"
        >
          <%= subject.name %>
        </div>

        <div class="ms-0 border border-black border-2 rounded-2">
          <div
            style="width: 0"
            class="bg-secondary bg-opacity-50 color_bar text-center m-0 rounded-1 container"
          >
            <%=((subject.attend_days * 100.0) /
            subject.totalDays).toString().slice(0, 5)%>%
          </div>
        </div>

        <div class="drop_down_item">
          <div class="new_styling text-light">
            <div class="button_container d-flex justify-content-evenly">
              <form
                action="/sent/<%=student._id%>/present/<%=subject._id%>"
                method="POST"
              >
                <button class="button_newStyle">Attended</button>
              </form>
              <form
                action="/sent/<%=student._id%>/absent/<%=subject._id%>"
                method="POST"
              >
                <button class="button_newStyle">Missed</button>
              </form>
            </div>
            <hr />
            <div class="info_container d-flex justify-content-evenly flex-wrap">
              <div class="info_box">
                <p class="text-dark text-opacity-85 heading_info">
                  &nbsp;Total Lectures&nbsp;
                </p>
                <p class="value"><%=subject.totalDays%></p>
              </div>
              <div class="info_box">
                <p class="text-dark text-opacity-85 heading_info">
                  &nbsp;Lectures Attended&nbsp;
                </p>
                <p class="value"><%=subject.attend_days%></p>
              </div>
              <div class="info_box">
                <% if (subject.canBeAbsent) { %>
                <div class="info_box">
                  <p class="text-dark text-opacity-85 heading_info">
                    &nbsp;Leaves Allowed&nbsp;
                  </p>
                  <p class="value"><%=subject.lectures%></p>
                </div>
                <% } else{ %>
                <div class="info_box">
                  <p class="text-dark text-opacity-85 heading_info">
                    &nbsp;Required Lectures&nbsp;
                  </p>
                  <p class="value"><%=subject.lectures%></p>
                </div>
                <% } %>
              </div>
            </div>
            <hr class="mt-0" />
            <div class="button_container d-flex justify-content-evenly">
              <form
                action="/sent/<%=student._id%>/delete/<%=subject._id%>"
                method="POST"
              >
                <button class="button_newStyle _down">Delete</button>
              </form>
            </div>
          </div>
        </div>
      </li>
      <% } %>
    </ol>
    <div class="d-flex justify-content-between mb-3 ps-5 pe-2">
      <form method="get" action="/logout">
        <button class="btn btn-warning">Logout</button>
      </form>
      <form method="get" action="/sent/<%=student._id%>/edit">
        <button class="btn btn-primary">Edit</button>
      </form>
      <form method="post" action="/sent/<%=student._id%>/deleteAll">
        <button class="btn btn-danger">Delete All</button>
      </form>
    </div>
  </div>
</body>
